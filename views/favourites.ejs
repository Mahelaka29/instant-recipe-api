<!DOCTYPE html>
<html>
  <head>
    <title>My Favourite Recipes</title>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
    <link rel="stylesheet" href="../style/result.css" />
  </head>
  <body>
<div class="container">
    <h1>My Favourite Recipes</h1>
  <div class="recipe-container">
    <% favourites.forEach(recipe => { %>
      <div class="recipe-card">
        <div class="recipe-content">
          <h3><%= recipe.recipe_title %></h3>
          <img src="<%= recipe.recipe_image %>" alt="<%=recipe.recipe_title %>" class="recipe-img" />
          <p><strong>Ready in:</strong> <%= recipe.ready_in_minutes %> minutes</p>
          <p><strong>Ingredients:</strong></p>
          <ul>
            <% recipe.ingredients?.forEach(ing => { %>
              <li><%= ing.original %></li>
            <% }) %>
          </ul>
          <div style="display: flex; align-items: center; justify-content: space-between; margin-top: 10px;">
              <a href="/recipe/<%= recipe.recipe_id %>" class="instruction-url">Read Instructions</a>
              <% if (user) { %>
          <form method="POST" action="/favourites/remove/<%=  recipe.id  %>" style="margin: 0;">
              <button
                type="submit"
                title="Remove from Favourites"
                style="background: none; border: none; font-size: 1em; cursor: pointer; color: #e63946; margin-left: 10px;"
              >
                <i class="fa-solid fa-trash"></i>
              </button>
            </form>
            <% } else { %>
              <button onclick="alert('Please log in to remove favourites!'); window.location.href='/login';" title="Remove from favourites" style="background: none; border: none; font-size: 1em; cursor: pointer;color: #e63946;">
            <% } %>
          </div>
        </div>
      </div>
    <% }) %>
  </div>
</div>

      <a href="/" class="navigation-link">Search Again </a>
    </div>
  </body>
</html>
